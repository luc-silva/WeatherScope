(()=>{"use strict";const e=async function(e="London",t="metric"){try{let n=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&APPID=67556afc5b803ebc6540b49ddb13c6a3&units=${t}`);return await n.json()}catch(e){throw new Error(`Wasn't possible to fetch data from API. ${e}`)}};let t=function(){let e,t=()=>document.createElement("div");return{createSearchContainer:function(){let e=t();e.id="clock-search-container";let a=t();a.id="search-container";let r=document.createElement("input");r.placeholder="Type a city here...",r.id="search-input";let c=document.createElement("button");c.addEventListener("click",(()=>{console.log(r.value),n(r.value)})),c.textContent="Search",c.id="search-btn",a.append(r,c);let i=document.createElement("strong");i.id="weather-clock";let o=t();return o.append(i),e.append(a,o),e},changeBackground:function(e){document.querySelector("#weather-app-image").style.backgroundImage=`url(${e})`},updateClock:function(){e=setInterval(a,3e3)},stopClock:function(){clearInterval(e),e=null},createWeatherCardContainer:function(){let e=t();return e.id="weather-card-container",e},createWeatherCard:function(e){let n=t();return n.classList.add("weather-card"),n.innerHTML=`\n        <span class="weather-card-city">${e.name}, ${e.sys.country}</span>\n        <div class="weather-card-status-container">\n            <div class="weather-card-status">\n                <span>${Math.round(e.main.temp)}°C</span> /\n                <span>${Math.round(1.8*e.main.temp+32)}°F</span>\n            </div>\n            <div class="weather-card-condition">\n                ${e.weather[0].description}\n                <img src="http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png"></img>\n            </div>\n        </div>`,n},createCityContainer:function(e){let n=document.querySelector("#weather-card-container"),a=t();a.id="weather-city-container-card";let r=t();r.id="weather-city-container-info";let c=t();c.innerHTML=`\n\t\t<div>\n\t\t\t<h2>${e.name} - ${e.sys.country}</h2>\n\t\t\t<p>${e.weather[0].description}</p>\n\t\t</div>`;let i=t();i.id="weather-city-container-info-stts",i.innerHTML=`\n\t\t<span><strong>Humidity: </strong>${e.main.humidity}%</span>\n\t\t<span><strong>Temp Min: </strong>${e.main.temp_min}°C</span>\n\t\t<span><strong>Temp Max: </strong>${e.main.temp_max}°C</span>`,r.append(c,i);let o=t();if(o.id="weather-city-container-img",o.innerHTML=`\n\t\t<h3>${e.main.temp}°C</h3>\n\t\t<img src="http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png">`,a.append(r,o),"weather-city-container-card"!=n.firstChild.id)n.prepend(a);else{let e=n.querySelectorAll("div");n.removeChild(e[0]),n.prepend(a)}}}}(),n=async function(n){let a=await e(n);t.createCityContainer(a)};function a(){let e=new Date,t=e.getHours(),n=e.getMinutes();n<10&&(n="0"+n),document.querySelector("#weather-clock").textContent=`${t}:${n}`}let r=async function(){t.stopClock();let e=document.querySelector("#main-container");e.textContent="";let n=document.createElement("div");n.id="settings-container";let a=document.createElement("h2");a.textContent="Settings:";let r=document.createElement("div");r.textContent="Default city: (City that shows on the main display)";let c=document.createElement("input");r.append(c);let i=document.createElement("div");i.textContent="Unit:";let o=document.createElement("select");o.innerHTML='\n\t<option value="metric">Metric</option>\n\t<option value="imperial">Imperial</option>',i.append(o),n.append(a,r,i),e.append(n)},c=async function(){let n=document.querySelector("#main-container");n.textContent="";let a=t.createSearchContainer(),r=t.createWeatherCardContainer();n.append(a,r),t.updateClock();let c=["London","Brasilia","Washington","Berlin","Moscow","Tokyo","Mexico City"];for(let n=0;n<c.length;n++){let a=await e(c[n]),r=t.createWeatherCard(a);document.querySelector("#weather-card-container").append(r)}},i={temperatureUnit:"metric",city:"London"},o=(async function(){let n=document.querySelector("#weather-temperature"),a=await e(),d=async function(){"metric"==i.temperatureUnit?(i.temperatureUnit="imperial",a=await e(i.city,i.temperatureUnit),n.textContent=`${a.main.temp}°F`):(i.temperatureUnit="metric",a=await e(i.city,i.temperatureUnit),n.textContent=`${a.main.temp}°C`),l(),s()},l=function(){let e=document.querySelector("#weather-status"),n=a.weather[0].description;switch(n=o(n),e.textContent=`${n}`,a.weather[0].main){case"Rain":t.changeBackground("../src/img/raining.jpg");break;case"Thunderstorm":t.changeBackground("../src/img/thunderstorm.jpg");break;case"Clouds":t.changeBackground("../src/img/cloudy.jpg");break;case"Snow":t.changeBackground("../src/img/snow.jpg");break;case"Drizzle":t.changeBackground("../src/img/drizzle.jpg");break;default:t.changeBackground("../src/img/clear.jpg")}},s=function(){document.querySelector("#weather-city").textContent=a.name};document.querySelector("#settings-button").addEventListener("click",r),document.querySelector("#weather-tab-btn").addEventListener("click",c),n.addEventListener("click",d),d()}(),e=>{e=e.split(" ");let t=[];return e.forEach((e=>{(e=e.split(""))[0]=e[0].toUpperCase(),e=e.join(""),t.push(e)})),t=t.join(" "),t})})();